# GitHub Actions workflow for Baler (BAd Link reportER) version 0.0.0.
# This is available as the file "sample-workflow.yml" from the open-
# source repository for Baler at https://github.com/caltechlibrary/baler/.

name: "Baler – BAd Link reportER"

# ╭────────────────────────────────────────────╮
# │ Configure this section                     │
# ╰────────────────────────────────────────────╯

env:
  # Markdown files examined by the workflow. Can be a comma-separated list.
  files: '*.md'

  # File containing a list of URLs to ignore, one per line.
  ignore: '.github/workflows/ignored-urls.txt'

  # Label assigned to issues created by this workflow.
  labels: 'bug'

on:
  schedule:
    - cron: "00 11 * * *"
  pull_request:
    paths:
      - '**.md'
  push:
    paths:
      - .github/workflows/markdown-link-tester.yml
      - .github/workflows/ignored-urls.txt
  workflow_dispatch:

# ╭────────────────────────────────────────────╮
# │ The rest of this file should be left as-is │
# ╰────────────────────────────────────────────╯

run-name: Test for bad links in repo files
jobs:
  run-baler:
    name: Check files matching `${{env.files}}`
    runs-on: ubuntu-latest
    steps:
      - uses: mhucka/baler@main
        with:
          files: ${{github.event.inputs.files || env.files}}
          labels: ${{github.event.inputs.labels || env.labels}}
          ignore: ${{github.event.inputs.ignore || env.ignore}}
